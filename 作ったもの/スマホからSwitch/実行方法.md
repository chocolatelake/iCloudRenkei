今回の一連の修正とビルド、実行手順をまとめたMarkdownを作成しました。
これを `README_BUILD.md` や `INSTRUCTION.md` などの名前で保存しておくと便利です。

---

```markdown
# SwitchRemoteMac 実行手順書

このドキュメントは、SwitchRemoteMac（Mac/Avalonia版）のソースコード修正からビルド、実行までの一連の手順をまとめたものです。

## 1. 前提条件
* .NET 8.0 (またはそれ以降) SDKがインストールされていること
* Apple Silicon (M1/M2/M3など) 搭載のMacを使用していること

## 2. ソースコードの更新
`MainWindow.axaml.cs` の内容を、**スナップ時の幅修正(25%)** および **コンパイルエラー修正(LayoutGrid復元)** が適用された最新のコードに書き換えてください。

## 3. リリースビルドの作成
ターミナルを開き、プロジェクトのルートディレクトリ（`SwitchRemoteMac.csproj`がある場所）で以下のコマンドを実行します。

これにより、.NETランタイムを内包したMac用(ARM64)の単体実行ファイルが作成されます。

```bash
dotnet publish -c Release -r osx-arm64 --self-contained

```

* `-c Release`: 最適化されたリリースモードでビルドします。
* `-r osx-arm64`: Apple Silicon Mac向けのネイティブアプリとして出力します。
* `--self-contained`: .NETランタイムをアプリに同梱し、単体で動作するようにします。

## 4. アプリケーションの起動

### Finderから起動する場合

以下のコマンドで、生成されたアプリ（`publish`フォルダ）をFinderで開きます。

```bash
open bin/Release/net10.0/osx-arm64/publish/

```

フォルダ内の黒いアイコンの実行ファイル **`SwitchRemoteMac`** をダブルクリックして起動します。

### ターミナルから直接起動する場合（ログ確認用）

エラーログなどを確認したい場合は、ターミナルから直接実行してください。

```bash
./bin/Release/net10.0/osx-arm64/publish/SwitchRemoteMac

```

## 5. 操作ガイド

### 基本操作

* **ウィンドウ移動**: ウィンドウ内の背景（ボタン以外の場所）をドラッグして移動できます。
* ※「スナップモード」や「最大化」のときはドラッグ移動が無効化されます。



### メニュー操作

画面上の **[MENU]** ボタン、またはキーボードの **[Tab]** キーでメニューを開きます。

* **Full / Win**: 全画面表示 / ウィンドウ表示の切り替え
* **Snap Left (←)**: 画面左端に寄せて、横幅を画面の25%にします。
* **Snap Right (→)**: 画面右端に寄せて、横幅を画面の25%にします。
* スナップを解除するには、もう一度ボタンを押すか、他のモードを選択してください。


* **Show Keys Map**: キーボードの対応表（WASD操作など）を表示します。
* **Btn Opacity**: ボタンの透明度を変更します。
* **Custom: ON/OFF**: 一部の拡張ボタンの表示/非表示を切り替えます。

### キーボード操作（Switch入力）

* **移動**: `W` `A` `S` `D` または `↑` `←` `↓` `→`
* **A / B / X / Y**: `Z` / `X` / `S` / `C` （またはキーマップ参照）
* **L / R**: `Q` / `E`
* **ZL / ZR**: `1` / `3`
* **-/+**: `M` / `N`
* **Home**: `H`
* **Capture**: `P`

```

```